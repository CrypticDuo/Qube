<!doctype html>
<html ng-app="QubeApp">
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.4/angular.min.js"></script>
	<script src="/static/javascript/qube.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/css/main.css">
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
<script>
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";

      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '190',
          width: $('.videolist').width(),
          videoId: 'M7lc1UVf-VE',
          playerVars:{'showinfo' : 0, 'autohide' : 0, 'controls' : 1, 'modestbranding' : 1},
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }
      
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      function onPlayerStateChange(event) {
      }
    </script>
</head>
<div id="QubePlaylist">
	<div ng-controller="QubeCont">

		<div class="topBar">
			<a class="category" ng-class="{active: layout == 'playlist'}" ng-click="layout = 'playlist'">playlist</a>
			<a class="category" ng-class="{active: layout == 'youtube'}" ng-click="layout = 'youtube'">youtube</a>
			<a class="category" ng-class="{active: layout == 'video'}" ng-click="layout = 'video'">video</a>
			<a class="category logout" href="./logout">logout</a>
		</div>



		<div class="displayView">
			<div class="left">
				<div ng-show="layout == 'playlist'" class ="view playlist">
					<input type="text" ng-model="searchString" placeholder="Search Playlist">
					<input ng-model="addPlaylistInput"></input><button ng-click="addPlaylist()">add</button>
					<ul class="userPlaylist">
						<li ng-repeat="playlist in playlists | searchFor:searchString" ng-class="{active: currentPlaylist.name == playlist.name}"
								ng-click="changePlaylist(playlist)" >
							<span>{{playlist.name}}</span>
						</li>
					</ul>
				</div>

				<div ng-show="layout == 'youtube'" class ="view youtube">
					<div class="youtubeSearchBar">
						<input ng-model="addVideoInput" placeholder="Search for Youtube videos"></input><!--
						--><button ng-click="searchYt(addVideoInput)"><span></span></button>
					</div>
					<div class="video" ng-repeat="video in ytSearchResult" ng-click="addVideo(video.id)">
					  <div class="video-image">
					  	<img class="video-image" src="{{ video.thumbnail }}">
					  	<p class="video-duration">{{ video.duration }}</p>
					  </div>
					  <p class="video-title">{{ video.title }}</p>
						<ul>
						  <li class="video-author">by {{ video.author }}</li>
						  <li class="video-views"> {{ video.views }} views </li>
						</ul>
						<p class="video-description">{{ video.description }}</p>
					</div>
				</div>

				<div ng-show="layout == 'video'" class ="view video">
					Video View mode!
				</div>
			</div><!--	
			--><div class ="right">
				<div class ="videolist">
					<div class ="playlistHeader">
						<span> {{currentPlaylist.name}} </span>
					</div>
					<div class="player" style="position:relative; height:inherit; width:inherit;">
						<div id="player"></div>
					</div>
					<ul class="userVideolist">
						<li ng-repeat="video in videos" ng-class="{active: video == currentPlaying}"
								ng-click="queueVideo(video)" >
							<span>{{video}}</span>
						</li>
					</ul>
				</div>
			</div>
		</div> <!-- END OF .displayView -->
	</div><!-- END OF ng-controller="QubeCont" -->
</div><!-- END OF #QubePlaylist -->

</body>
</html>
